<script type="module">
  import { Octokit } from 'https://cdn.skypack.dev/@octokit/core';

  const octokit = new Octokit({
    auth: window.atob('<%= theme.like.gistBase64Token %>')
  });

  async function main() {
    const { id, files } = await window.candelas.getPostLikeGist(octokit);
    const fingerprint = await window.candelas.getFingerprint();

    window.candelas.updatePostLikeGist(octokit, id, fingerprint);
  }

  main();
</script>
